---
title: API Reference
description: Comprehensive API documentation for IntrepidQ AI
---

# API Reference

## Question Generation API

### Generate Questions by Topic
**POST** `/api/generate_questions`

Generate UPSC questions for a specific topic.

#### Request Body
```json
{
  "topic": "string",
  "num": "integer",
  "use_ca": "boolean",
  "months": "integer",
  "model": "string",
  "news_source": "string",
  "keyword_context": "string"
}
```

#### Parameters
- `topic` (required): The topic for which to generate questions
- `num` (optional, default: 3): Number of questions to generate
- `use_ca` (optional, default: false): Whether to include current affairs
- `months` (optional, default: 6): Number of months of current affairs to include
- `model` (optional, default: "llama3-70b"): AI model to use for generation
- `news_source` (optional, default: "all"): News source for current affairs
- `keyword_context` (optional): Context for keyword-based generation

#### Response
```json
{
  "questions": [
    {
      "question": "string"
    }
  ],
  "meta": {
    "model": "string",
    "response_time": "number",
    "cached": "boolean"
  },
  "topic": "string",
  "question_count": "integer",
  "stats": {
    "generation_count_today": "integer",
    "remaining_today": "integer",
    "last_generation_date": "string"
  }
}
```

### Generate Whole Paper
**POST** `/api/generate_whole_paper`

Generate a complete UPSC paper.

#### Request Body
```json
{
  "subject": "string",
  "use_ca": "boolean",
  "months": "integer",
  "model": "string",
  "news_source": "string"
}
```

#### Parameters
- `subject` (required): The subject for which to generate a paper (GS1, GS2, GS3, GS4)
- `use_ca` (optional, default: false): Whether to include current affairs
- `months` (optional, default: 6): Number of months of current affairs to include
- `model` (optional, default: "llama3-70b"): AI model to use for generation
- `news_source` (optional, default: "all"): News source for current affairs

#### Response
```json
{
  "questions": [
    {
      "question": "string"
    }
  ],
  "meta": {
    "model": "string",
    "response_time": "number",
    "cached": "boolean"
  },
  "subject": "string",
  "question_count": "integer",
  "stats": {
    "generation_count_today": "integer",
    "remaining_today": "integer",
    "last_generation_date": "string"
  }
}
```

### Generate Questions from Keywords
**POST** `/api/generate_questions_from_keywords`

Generate UPSC questions based on keywords.

#### Request Body
```json
{
  "keywords": ["string"],
  "num": "integer",
  "use_ca": "boolean",
  "months": "integer",
  "model": "string",
  "subject": "string"
}
```

#### Parameters
- `keywords` (required): Array of keywords to generate questions from
- `num` (optional, default: 3): Number of questions to generate
- `use_ca` (optional, default: false): Whether to include current affairs
- `months` (optional, default: 6): Number of months of current affairs to include
- `model` (optional, default: "llama3-70b"): AI model to use for generation
- `subject` (optional, default: "GS1"): Subject for question generation

#### Response
```json
{
  "questions": [
    {
      "question": "string"
    }
  ],
  "meta": {
    "model": "string",
    "response_time": "number",
    "cached": "boolean"
  },
  "keywords": ["string"],
  "question_count": "integer",
  "stats": {
    "generation_count_today": "integer",
    "remaining_today": "integer",
    "last_generation_date": "string"
  }
}
```

### Check Guest Limit
**GET** `/api/check_guest_limit`

Check current guest generation limit status.

#### Response
```json
{
  "generations_used": "integer",
  "daily_limit": "integer",
  "remaining": "integer",
  "limit_reached": "boolean"
}
```

## Answer Evaluation API

### Evaluate Answer
**POST** `/api/evaluate_answer`

Evaluate a user's answer to a question.

#### Request Body
```json
{
  "question": "string",
  "answer": "string",
  "model": "string"
}
```

#### Parameters
- `question` (required): The original question
- `answer` (required): The user's answer
- `model` (optional, default: "llama3-70b"): AI model to use for evaluation

#### Response
```json
{
  "evaluation": "string",
  "score": "integer",
  "feedback": "string",
  "meta": {
    "model": "string",
    "response_time": "number"
  }
}
```

## Subject Management API

### Get Subjects
**GET** `/api/subjects`

Get a list of available subjects.

#### Response
```json
{
  "subjects": {
    "GS1": {
      "name": "string",
      "topics": ["string"]
    },
    "GS2": {
      "name": "string",
      "topics": ["string"]
    },
    "GS3": {
      "name": "string",
      "topics": ["string"]
    },
    "GS4": {
      "name": "string",
      "topics": ["string"]
    }
  }
}
```

### Get Topics
**GET** `/api/topics/{subject}`

Get a list of topics for a specific subject.

#### Parameters
- `subject` (required): The subject for which to get topics

#### Response
```json
{
  "subject": "string",
  "topics": ["string"]
}
```

## Model Performance API

### Get Model Performance
**GET** `/api/model_performance`

Get performance metrics for all AI models.

#### Response
```json
{
  "models": {
    "llama3-70b": {
      "avg_response_time": "number",
      "success_rate": "number",
      "total_calls": "integer"
    },
    "gemini-1.5-flash": {
      "avg_response_time": "number",
      "success_rate": "number",
      "total_calls": "integer"
    }
  }
}
```

## Authentication API

### Get User Info
**GET** `/api/user`

Get information about the currently authenticated user.

#### Response
```json
{
  "user": {
    "id": "string",
    "email": "string",
    "generation_count_today": "integer",
    "daily_limit": "integer",
    "last_generation_date": "string"
  }
}
```

### Get User Profile
**GET** `/api/user_profile`

Get detailed user profile information.

#### Response
```json
{
  "profile": {
    "id": "string",
    "email": "string",
    "full_name": "string",
    "username": "string",
    "total_questions_generated": "integer",
    "generation_count_today": "integer",
    "last_generation_date": "string",
    "created_at": "string"
  },
  "user": {
    "id": "string",
    "aud": "string",
    "role": "string",
    "email": "string",
    "user_metadata": {
      "full_name": "string",
      "preferred_username": "string"
    },
    "created_at": "string",
    "updated_at": "string"
  }
}
```

## Statistics API

### Get User Statistics
**GET** `/api/user_stats`

Get detailed user statistics.

#### Response
```json
{
  "total_generations": "integer",
  "total_questions": "integer",
  "feedback_count": "integer",
  "individual_feedback_count": "integer",
  "generation_feedback_count": "integer",
  "subject_breakdown": {
    "GS1": "integer",
    "GS2": "integer",
    "GS3": "integer",
    "GS4": "integer"
  },
  "mode_breakdown": {
    "topic": "integer",
    "paper": "integer"
  },
  "current_affairs_usage": "integer"
}
```

## Recent API Enhancements

### Keyword-based Question Generation
Added new endpoint for generating questions based on keywords:
- `/api/generate_questions_from_keywords` endpoint
- Support for multiple keywords as input
- Integration with vector search for context-aware generation

### Guest User Support
Added support for guest users with IP-based rate limiting:
- `/api/check_guest_limit` endpoint to check current usage
- Separate daily limit for guest users (2 questions/day)
- IP-based tracking for guest usage

### Enhanced Rate Limiting
Improved rate limiting implementation:
- Daily limit enforcement moved to database triggers
- Real-time stats in API responses
- Better error handling for limit exceeded scenarios

### Model Selection
Enhanced model selection capabilities:
- Multiple AI model support (Llama3, Gemini, etc.)
- Model performance tracking
- User-selectable models for question generation and evaluation