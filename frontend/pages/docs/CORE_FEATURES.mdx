# Core Features

## Question Generation System

### Multi-Model AI Support
The system supports multiple AI providers for question generation:
- **Groq**: Primary provider with models like Llama3-70b for fast inference
- **Google Gemini**: Alternative provider for redundancy and diversity
- **OpenRouter**: Access to additional models like DeepSeek and Moonshot

#### Adaptive Model Selection
- Tracks performance metrics for each model (response time, success rate)
- Automatically selects the best performing model for each request
- Provides fallback mechanisms when primary models fail
- Balances load across available models

### Context-Aware Generation
- Uses vector similarity search to retrieve relevant context from previous years' questions using pgvector
- Integrates current affairs data for up-to-date questions
- Supports stratified sampling to ensure diverse example selection
- Caches generated questions for improved performance using Upstash Redis

### Generation Modes
1. **Topic Mode**: Generate questions for a specific UPSC topic
2. **Paper Mode**: Generate a complete UPSC paper for a subject
3. **Keyword Mode**: Generate questions based on specific keywords using Upstash Search
4. **Current Affairs Mode**: Generate questions incorporating recent news and events

### Rate Limiting
- **Authenticated Users**: 5 questions per day
- **Guest Users**: 2 questions per day per IP address
- **IP-based Tracking**: For guest user management
- **Real-time Limits**: Immediate feedback when limits are reached

## Vector Search and Indexing

### Document Processing Pipeline
1. **PDF Parsing**: Extract text from UPSC preparation materials
2. **Content Cleaning**: Remove noise and format text appropriately
3. **Section Identification**: Identify and categorize content sections
4. **Chunking**: Break content into manageable chunks
5. **Metadata Extraction**: Extract relevant metadata for each chunk

### Vector Indexing
- Uses sentence transformers for text embedding
- FAISS vector store for efficient similarity search
- pgvector for persistent vector storage in PostgreSQL
- Supabase integration for database operations
- Automatic index regeneration and maintenance

### Stratified Sampling
- Ensures diverse example selection from different document sections
- Provides variety while maintaining quality
- Each time the same topic is called, different examples are selected from each stratum

## PDF Parsing Workflow

### Text Extraction
- Handles various PDF formats and structures
- Preserves formatting and structure where possible
- Cleans extracted text to remove artifacts

### Content Organization
- Groups questions by GS paper and topic
- Maintains hierarchical organization
- Adds metadata for efficient retrieval

### Quality Assurance
- Validates extracted content
- Identifies and handles edge cases
- Ensures consistency across documents

## Current Affairs Integration

### News Source Integration
- Integrates with multiple news sources
- Supports different news categories
- Allows users to select preferred sources

### Time-Based Filtering
- Filters news by date range
- Supports configurable time windows
- Integrates with question generation context

### Relevance Matching
- Matches current affairs to UPSC topics
- Ensures relevance to exam syllabus
- Balances current affairs with static content

## Feedback and Analytics System

### User Feedback
- Rating system for generated questions
- Comment functionality for detailed feedback
- Feedback categorization (bug, feature, general)
- Integration with support ticket system

### Usage Analytics
- Tracks generation patterns and trends
- Monitors system performance
- Identifies popular topics and subjects
- Measures user engagement and retention

### Performance Monitoring
- Tracks AI model response times
- Monitors success rates and error patterns
- Identifies performance bottlenecks
- Enables proactive system optimization

## Recent Feature Enhancements

### Guest User Support
- Added support for unauthenticated users with IP-based rate limiting
- Separate daily limit for guest users (2 questions/day)
- Guest generation tracking in dedicated database table
- Real-time guest limit checking endpoint

### Keyword-Based Generation
- New generation mode supporting keyword-based questions
- Enhanced vector search using Upstash Search for keyword context retrieval
- Integration with existing topic and paper modes

### Current Affairs Mode
- New generation mode incorporating recent news and events
- Configurable time windows for current affairs inclusion
- Integration with news APIs for up-to-date content
- Seamless UI integration with topic selection

### Model Performance Improvements
- Expanded AI model support with multiple providers
- Enhanced model selection algorithms
- Better error handling and fallback mechanisms
- Detailed performance tracking and reporting

### Database Schema Enhancements
- Added model tracking for better analytics
- Improved feedback categorization
- Extended generation modes to support keywords and current affairs
- Optimized indexes for better query performance

### UI/UX Improvements
- Simplified main interface by removing unnecessary tabbed navigation
- Streamlined question generation workflow
- Improved responsive design for better mobile experience
- Removed deprecated OCR and screenshot evaluation features